<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FAANG Simulator Pro 2.0</title>
    <!-- Tailwind CSS (via CDN for No-Build) -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            background-color: #1e1e1e;
            color: #d4d4d4;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            overflow: hidden;
        }

        .monaco-editor {
            padding-top: 10px;
        }

        /* Professional Scrollbar */
        ::-webkit-scrollbar {
            width: 10px;
        }

        ::-webkit-scrollbar-track {
            background: #1e1e1e;
        }

        ::-webkit-scrollbar-thumb {
            background: #424242;
            border-radius: 5px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #4f4f4f;
        }

        .panel-header {
            background-color: #252526;
            padding: 8px 16px;
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: #ccc;
            border-bottom: 1px solid #3e3e42;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .chat-message {
            margin-bottom: 12px;
            padding: 8px;
            border-radius: 4px;
            font-size: 0.9rem;
            line-height: 1.4;
        }

        .chat-message.system {
            color: #6a9955;
            border-left: 3px solid #6a9955;
            background: rgba(106, 153, 85, 0.1);
        }

        .chat-message.interviewer {
            color: #569cd6;
            border-left: 3px solid #569cd6;
            background: rgba(86, 156, 214, 0.1);
        }

        .chat-message.candidate {
            color: #ce9178;
            border-left: 3px solid #ce9178;
            background: rgba(206, 145, 120, 0.1);
            text-align: right;
        }

        #whiteboard {
            background: #fff;
            cursor: crosshair;
        }
    </style>
</head>

<body class="flex h-screen flex-col">

    <!-- Header -->
    <header class="h-12 bg-[#333333] flex items-center px-4 justify-between border-b border-[#1e1e1e]">
        <div class="flex items-center gap-2">
            <div class="text-[#007acc] font-bold text-lg">FAANG<span class="text-white">Sim</span></div>
            <span class="text-xs bg-[#0e639c] px-2 py-0.5 rounded text-white">PRO</span>
        </div>
        <div class="flex items-center gap-4">
            <div id="status-indicator" class="flex items-center gap-2 text-xs text-gray-400">
                <span class="w-2 h-2 rounded-full bg-red-500" id="ws-status"></span>
                <span id="connection-text">Disconnected</span>
            </div>
            <button id="mic-toggle"
                class="bg-[#333333] hover:bg-[#444] text-white p-2 rounded-full border border-gray-600 transition-colors">
                ðŸŽ¤
            </button>
        </div>
    </header>

    <!-- Main Workspace -->
    <main class="flex-1 flex overflow-hidden">

        <!-- Left Panel: Context & Chat -->
        <div class="w-1/4 bg-[#252526] flex flex-col border-r border-[#1e1e1e]">
            <div class="panel-header">Interview Context</div>
            <div class="flex-1 overflow-y-auto p-4" id="chat-container">
                <div class="chat-message system">System: Initializing Interview Engine...</div>
            </div>
            <div class="p-2 border-t border-[#3e3e42] bg-[#1e1e1e]">
                <textarea id="chat-input"
                    class="w-full bg-[#3c3c3c] text-white border border-[#3e3e42] p-2 text-sm rounded focus:outline-none focus:border-[#007acc]"
                    rows="2" placeholder="Type clarification questions..."></textarea>
            </div>
        </div>

        <!-- Center Panel: Editor -->
        <div class="flex-1 flex flex-col bg-[#1e1e1e]">
            <div class="panel-header">
                <span>main.py</span>
                <button class="bg-[#0e639c] hover:bg-[#1177bb] text-white px-3 py-1 text-xs rounded"
                    onclick="runCode()">â–¶ Run</button>
            </div>
            <div id="editor-container" class="flex-1"></div>
        </div>

        <!-- Right Panel: Whiteboard/Output -->
        <div class="w-1/4 bg-[#252526] flex flex-col border-l border-[#1e1e1e]">
            <div class="panel-header">
                <span>System Design / Output</span>
                <div class="flex gap-1">
                    <button class="text-xs px-2 py-1 bg-[#333] hover:bg-[#444] rounded"
                        onclick="clearWhiteboard()">Clear</button>
                </div>
            </div>
            <div class="h-1/2 bg-white relative">
                <canvas id="whiteboard" class="w-full h-full"></canvas>
            </div>
            <div class="flex-1 bg-[#1e1e1e] border-t border-[#3e3e42] p-2 font-mono text-xs text-green-400 overflow-y-auto"
                id="terminal-output">
                > Ready.
            </div>
        </div>

    </main>

    <!-- Monaco Editor Loader -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.30.1/min/vs/loader.min.js"></script>
    <script>
        require.config({ paths: { 'vs': 'https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.30.1/min/vs' } });
        require(['vs/editor/editor.main'], function () {
            window.editor = monaco.editor.create(document.getElementById('editor-container'), {
                value: [
                    'def solution(arr):',
                    '    # Write your O(n) solution here',
                    '    pass'
                ].join('\n'),
                language: 'python',
                theme: 'vs-dark',
                automaticLayout: true,
                minimap: { enabled: false }
            });
        });
    </script>
    <script src="pro_client.js"></script>
</body>

</html>